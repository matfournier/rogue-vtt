import { Scene, Palette, SceneOptions} from "fastiles";


function getFont(): TexImageSource {
    const  fontSrc = "data:image/png;base64,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" 
    let img = new Image()
    img.src = fontSrc
    return img
}

function getScene(options: SceneOptions, palette: Palette): Scene {
    let scene = new Scene(options)
    scene.palette = palette
    return scene
}

let options: SceneOptions = {
    tileCount: [80, 80],
    tileSize: [12, 12],
    font: getFont()
}

let uiOptions: SceneOptions = { 
    tileCount: [50, 80],
    tileSize: [12, 12], 
    font: getFont()
}

let scene = getScene(options, Palette.xterm256())
let uiScene = getScene(uiOptions, Palette.xterm256())


document.getElementById("screen")?.appendChild(scene.node)
document.getElementById("ui")?.appendChild(uiScene.node)

// document.body.appendChild(scene.node)
// document.body.appendChild(uiScene.node)


scene.draw(
	[10, 10], // position
	42,     // glyph index
	11,      // foreground color index
	15       // background color index
)

uiScene.draw(
    [10, 11], 
    56, 
    10, 
    15
)